// Sieve of Eratosthenes up to 1_000_000.
// NOTE: requires a larger heap than the current 1MB default (see RuntimeContext).

fn main() -> int {
    int n = 1000000;
    int[] isPrime = new int[n + 1];

    int i = 2;
    while (i <= n) {
        isPrime[i] = 1;
        i = i + 1;
    }

    int p = 2;
    while (p * p <= n) {
        if (isPrime[p] == 1) {
            int j = p * p;
            while (j <= n) {
                isPrime[j] = 0;
                j = j + p;
            }
        }
        p = p + 1;
    }

    int count = 0;
    i = 2;
    while (i <= n) {
        if (isPrime[i] == 1) {
            count = count + 1;
        }
        i = i + 1;
    }

    print("prime_count:");
    print(count);
    return count;
}
